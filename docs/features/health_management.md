# 健康管理与用药提醒 (Health & Medication)

智能化的用药管理系统，结合 AI 视觉识别技术，确保长辈按时、按量、正确服药。

## 功能特性

### 1. 智能用药提醒
- **定时广播**：
    - 根据设定的服药计划，准时触发全屏提醒。
    - 使用大音量语音播报："奶奶，早饭后该吃药了，有3种药。"
- **稍后提醒**：
    - 如果长辈暂时不便，支持"稍后提醒"（Snooze）功能，10分钟后再次呼叫。

### 2. AI 拍照验药 (Medication Verification)
- **视觉识别**：
    - 集成 **Qwen-VL Plus** 视觉大模型。
    - 长辈只需对着药盒/药瓶拍张照，系统通过 AI 自动识别药品名称、剂量和服用频次。
- **智能核对**：
    - **防错服**：系统自动将 AI 识别结果与当前的用药计划进行比对。
    - **逻辑判断**：
        - 验证药品名称是否匹配（支持模糊匹配）。
        - 验证当前时间是否为该药品的正确服用时段（支持前后120分钟弹性窗口）。
- **语音反馈**：
    - **正确**："是这个药，一次吃一片。"
    - **错误**："不对哦，这个是降压药，现在应该吃降糖药。"
    - **非服药时间**："现在还不到吃这个药的时候哦。"

### 3. 健康数据记录
- **用药打卡**：每次服药（拍照核对通过或手动确认）都会自动记录。
- **家属同步**：服药记录实时同步至家属端，家人可远程查看长辈是否按时吃药。

## 技术实现

- **MedicationRecognitionService**:
    - 图像压缩 (`ImageUtils`) 后调用 Qwen-VL API。
    - 解析非结构化的 AI 响应为结构化 JSON 数据 (name, dosage, times)。
- **MedicationVerificationHelper**:
    - 实现模糊字符串匹配算法 (Levenshtein Distance)，处理同名异字或简称问题。
    - 时间窗口逻辑：处理跨天和弹性时间判断。
- **AlarmScheduler**: 使用 `AlarmManager` 实现精准定时任务。

## 使用流程
1. 家人在 App 中录入长辈的用药计划（如：阿司匹林，每日8:00，1片）。
2. 到达设定时间，长辈设备响起警报。
3. 长辈点击"吃药"，进入拍照界面。
4. 长辈拍摄手边的药盒。
5. AI 识别并核对，语音告知结果。
